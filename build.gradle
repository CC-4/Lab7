// project plugins
plugins {
  id 'java'
}

// lab version
version = '1.0'

// dependencies repositories
repositories {
  mavenCentral()
}

// compile and test dependencies
dependencies {
  compile 'commons-cli:commons-cli:1.4'
  compile files('lib/java-cup-11b-runtime.jar')
}

// change source sets
sourceSets {
  main {
    java { srcDirs = [ 'src' ] }
  }
}

// jar configuration
jar {
  baseName = 'lab7'
  manifest {
    attributes (
      'Main-Class': 'Main',
      'Implementation-Title': 'Lab 7',
      'Implementation-Version': version
    )
  }
  // create fat jar
  from {
    configurations.runtimeClasspath.collect {
      it.isDirectory() ? it : zipTree(it)
    }
  }
}

// java source and target compatibility
sourceCompatibility = 1.8
targetCompatibility = 1.8

// compile java source code in UTF-8
compileJava.options.encoding = 'UTF-8'
